<ng-flash-message></ng-flash-message>

<form [formGroup]="form" (ngSubmit)="resetPassword()" class="form-signin">
  <div class="text-center mb-4">
    <h1 class="h3 mb-3 font-weight-normal">Create a new password</h1>
  </div>

  <div class="form-label-group">
    <input type="password" id="inputPassword" formControlName="password" class="form-control" placeholder="Password"
           [ngClass]="formUtils.showSuccessOrError('password')">
    <label for="inputPassword">Password</label>
    <div *ngIf="formUtils.showFieldError('password')" class="invalid-feedback">
      <span *ngIf="form.get('password').errors.required">Password required!</span>
      <span
        *ngIf="form.get('password').errors.minlength">Password must have at least {{form.get('password').errors.minlength.requiredLength}}
        characters!</span>
    </div>
  </div>

  <div class="form-label-group">
    <input type="password" id="inputPasswordConfirmation" formControlName="passwordConfirmation" class="form-control"
           placeholder="Password Confirmation" [ngClass]="formUtils.showSuccessOrError('passwordConfirmation')">
    <label for="inputPasswordConfirmation">Password Confirmation</label>
    <div *ngIf="formUtils.showFieldError('passwordConfirmation')" class="invalid-feedback">
      <span *ngIf="form.get('passwordConfirmation').errors.required">Password confirmation required!</span>
      <span
        *ngIf="form.get('passwordConfirmation').errors.mismatch">Password confimation does not match!</span>
    </div>
  </div>

  <input type="hidden" formControlName="resetPasswordToken">

  <button [disabled]="form.invalid || submitted" class="btn btn-lg btn-success btn-block" type="submit">
    <span *ngIf="!submitted">Create new password</span>
    <div *ngIf="submitted">
      <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>
      Loading...
    </div>
  </button>

</form>
